<div class="padding-content margin-big-top">
  <h2><i class="fa fa-cube"></i> <%= @company_name %></h2>

  <h5 class="margin-big-top">Ajouter des places de stage dans votre entreprise:</h5>

  <%= simple_form_for :hiring, url: company_hirings_path, method: :post do |f| %>
    <div class="inline-form-wrapper flex-left">
      <%= f.input :internship_id, label: "Type de stage", collection: Internship.all, class: "input-medium" %>
      <%= f.input :job_id, label: "Type de métier", collection: Job.all, class: "input-medium" %>
      <%= f.input :number, label: "Nombre de place", collection: 1..40, class: "input-numeric" %>
      <%= f.button :submit, "Créer", class: "btn-inline btn-medium btn-blue fix-btn-simpleform" %>
    </div>
  <% end %>

  <h5>Places de stage disponibles:</h5>

  <% @hirings.each do |hiring| %>
    <div class="user row">
      <div class="col-xs-6">
        <h6>Nom de l'élève:</h6>
        <h4>Josie Dalembert - <%= hiring.internship.name %></h4>
        <h6><%= current_user.address %></h4>
      </div>
      <% if hiring.accepted? %>
        <% hiring.accepted_student_hirings.each do |request| %>
          <div class="col-xs-6">
            <div class="flexbox btn-slim btn-inverse">
              <%= request.student.full_name %>
              Denied
            </div>
            <div class="flexbox btn-slim btn-inverse">
              Accepté
            </div>
          </div>
        <% end %>
      <% elsif hiring.required? %>
        <% hiring.required_student_hirings.each do |request| %>
          <div class="col-xs-6">
            <%= request.student.full_name %>
          </div>
          <div class="col-xs-6">
            <%= link_to "accepter", company_student_hiring_path(hiring, state: 2), method: :put, class: "flexbox btn-slim btn-blue" %>
            <%= link_to "refuser", company_student_hiring_path(hiring, state: 3), method: :put, class: "flexbox btn-slim btn-yellow" %>
          </div>
        <% end %>
      <% else %>
        <div class="col-xs-6">
          <div class="flexbox btn-slim btn-gray">
            Pas de candidat pour ce stage
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
